"use strict";$(function(){function imageReady(){!function(window){var page=$(".page").attr("class").replace(/page/,"");$("body").append("<div id='bloom-container'></div>");var socialMenu=new BloomingMenu({startAngle:90,endAngle:270,radius:100,itemsNum:5,itemAnimationDelay:.08,CSSClassPrefix:"social-"});socialMenu.render();var localeMenu=new BloomingMenu({startAngle:200,endAngle:160,radius:100,itemsNum:2,itemAnimationDelay:.08,CSSClassPrefix:"locale-"});localeMenu.render(),$(".locale-item, .social-item").each(function(i,d){var o=this,imgURL=$("button",o).css("background-image").replace(/url\(|\)|'|"/gi,"");$.get(imgURL,function(data){var $svg=$(data).find("svg");$svg=$svg.removeAttr("xmlns:a"),$("button",o).append($svg),$("button",o).css("background-image","url()"),$("button",o).eq(0).on("click",function(){})},"xml")}),$("#bloom-container").append($(".social-container, .locale-container")),$("#bloom-container").addClass(page);var offset=$("#bloom-container").offset().top-220,butt=$(document).height()-710,offsetButt=butt-220;$("body").append("<style>#bloom-container.butt{top:"+butt+"px!important}</style>"),$(window).on("scroll resize",function(){var st=$(window).scrollTop();st>offset?$("#bloom-container").addClass("fixed"):$("#bloom-container").removeClass("fixed"),st>offsetButt?$("#bloom-container").addClass("butt"):$("#bloom-container").removeClass("butt")})}(window)}function initialize(){function drawMap(data){var rows=data.rows;for(var i in rows){var pos={lat:rows[i][2].geometry.coordinates[1],lng:rows[i][2].geometry.coordinates[0]},pin=$("<div></div").append(mapicon.clone());$("img",pin).attr("src",$("img",pin).attr("src")+rows[i][3]);var marker=new Marker({map:map,position:pos,icon:{path:""},map_icon_label:pin.html()});marker.name=rows[i][1],marker.description=rows[i][0],marker.icon=rows[i][3],marker.addListener("click",function(){var container=$("<div></div>"),aside=$("<aside class='inmap'></aside>");aside.append("<h3 class='fontsize-16 font-default'>"+this.name+"</h3>"),aside.append("<p class='fontsize-13 font-default'>"+this.description+"</p>"),container.append(aside),$(".inmap").remove();var latLng={lat:this.getPosition().lat()+9e-4,lng:this.getPosition().lng()};markerInfoWindow.setPosition(latLng),markerInfoWindow.setContent(container.html()),markerInfoWindow.open(map),$(".gm-style-iw").parent().css("margin-top","-55px")}),marker.addListener("mouseout",function(){markerInfoWindow.close()})}$("html").addClass("image-ready")}var markerInfoWindow=new google.maps.InfoWindow,map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:14,scrollwheel:!1,center:new google.maps.LatLng(24.974891028984523,121.52769804000853)}),script=document.createElement("script"),url=["https://www.googleapis.com/fusiontables/v1/query?"];url.push("sql=");var query="SELECT * FROM 15FsqLyGDUOflrGelPOyEoF3D5937VLar3QHj2hoF",encodedQuery=encodeURIComponent(query);url.push(encodedQuery),url.push("&callback=drawMap"),url.push("&key=AIzaSyBf_sGPZtgUPenHRRZ-8nBUp7rZYru0bBo"),script.src=url.join("");var body=document.getElementsByTagName("body")[0];body.appendChild(script);var mapicon=$(".map-icon").clone();$(".map-icon").remove(),window.drawMap=drawMap,google.maps.event.addDomListener(map,"dragend",function(){console.log(map.getCenter())})}if($("#menu >ul").length){var left=document.createElement("div");$(left).addClass("left-menu").append($("#menu ul:eq(0)").clone().addClass("menu")),$(left).addClass("left-menu").append($("footer .social ul").clone().addClass("social")),$(left).appendTo($("body")),$(".left-menu").prepend($(".close-menu").removeClass("hide")),$("#menu >ul").superfish({animation:{opacity:"show",height:"show"},animationOut:{opacity:"hide",height:"hide"}});$("#slidedown-menu").on("click",function(ev){TweenMax.set("html,body",{scrollTop:0}),$("body").addClass("menuon"),$(".left-menu").css("height","auto"),$(".left-menu").fadeIn(550),$(".left-menu >ul").hide().fadeIn(550),TweenMax.set($(".left-menu >ul >li >a"),{lineHeight:"11em",opacity:.01}),TweenMax.set($(".left-menu >ul.menu"),{marginTop:"200px"}),TweenMax.to($(".left-menu >ul >li >a"),.75,{lineHeight:"3em",opacity:1,onComplete:function(){$("header, footer, .page, #kv, #kvm").css("position","fixed")}}),TweenMax.to($(".left-menu >ul.menu"),.55,{marginTop:"70px"})});$(".close-menu").on("click",function(){$(".left-menu").fadeOut(550),$(".left-menu >ul").fadeOut(550,function(){$(".left-menu").css("height","auto"),$("body").removeClass("menuon"),$("header, footer, .page, #kv, #kvm, body").removeAttr("style"),$("header .mobile-menu li").removeClass("on")})}),$(".left-menu >ul >li ul").each(function(i,d){var o=$(this).parent();o.addClass("child-closed"),$(">a",o).on("click",function(){o.hasClass("child-opened")?($("ul",o).slideUp(250),o.removeClass("child-opened")):(o.addClass("child-opened"),TweenMax.set($("li a",o),{lineHeight:"11em",opacity:.01}),TweenMax.to($("li a",o),.55,{lineHeight:"3em",opacity:1}),$("ul",o).fadeIn(550))})})}$("#kv").length&&($("#kv").clone().attr("id","kvm").removeAttr("class").insertAfter($("#kv")),$("#kv ul").slick({dots:!0,infinite:!0,slidesToShow:1,centerMode:!0,variableWidth:!0,autoplay:!0,autoplaySpeed:3e3,pauseOnHover:!0,speed:2e3,cssEase:"ease-out"}),$("#kvm ul").slick({infinite:!0,slidesToShow:1,variableWidth:!0,centerMode:!0,autoplaySpeed:3e3,pauseOnHover:!0,speed:750,cssEase:"ease-in-out"})),$(".page.home .life .slide-container")&&!function(slide){var slideM=slide.clone().addClass("slide-container-mobile").removeClass("slide-container").insertAfter(slide);$("ul",slide).slick({dots:!0,infinite:!0,slidesToShow:3,slidesToScroll:3,variableWidth:!1,autoplaySpeed:3e3,pauseOnHover:!0,speed:750}),$("ul",slideM).slick({dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,autoplaySpeed:3e3,pauseOnHover:!0,speed:250})}($(".page.home .life .slide-container")),function(){var arr=[];$(".page.home .concept li a").length&&$(".page.home .concept li a").each(function(){arr.push(this)}),$(window).on("scroll resize",function(){if(!($(window).width()>=1170)){var scrollTop=($(".header").height(),$(window).scrollTop());$(arr).each(function(i,d){scrollTop>$(d).offset().top-$(window).height()+$(d).height()/2&&scrollTop<$(d).offset().top?$(d).addClass("on"):$(d).removeClass("on")})}})}(),$("#map-canvas").length&&google.maps.event.addDomListener(window,"load",initialize),$(".page.contact .contact-list").length&&!function(slide){slide.clone().addClass("hidden-lg").removeClass("hidden-xs").removeClass("hidden-md").removeClass("hidden-sm").insertAfter(slide);slide.slick({dots:!0,infinite:!0,slidesToShow:4,slidesToScroll:4,variableWidth:!1,autoplaySpeed:3e3,pauseOnHover:!0,speed:750})}($(".page.contact .contact-list")),$(".checkradios").checkradios(),$(".dropdown").length&&$(".dropdown-menu li a").click(function(){var container=$(this).parents(".dropdown");$(".btn:first-child",container).text($(this).text()),$(".btn:first-child",container).val($(this).text()),$(this).parents("li").addClass("selected").siblings().removeClass("selected")});var count=$("img.svg").length,cursor=0;if($("img.svg").each(function(){var $img=$(this),imgID=$img.attr("id"),imgClass=$img.attr("class"),imgURL=$img.attr("src");$.get(imgURL,function(data){var $svg=$(data).find("svg");"undefined"!=typeof imgID&&($svg=$svg.attr("id",imgID)),"undefined"!=typeof imgClass&&($svg=$svg.attr("class",imgClass+" replaced-svg")),$svg=$svg.removeAttr("xmlns:a"),$img.replaceWith($svg),cursor++,cursor===count&&((!$("#map-canvas").length||$(window).width()<1170)&&$("html").addClass("image-ready"),imageReady())},"xml")}),$(".page.home").length){var slideupBnr=function(){var winHeight=$(window).height(),showupArr=[];showupArr.push($(".home .concept li").eq(0).addClass("showup delay-1")),showupArr.push($(".home .concept li").eq(1).addClass("showup delay-2")),showupArr.push($(".home .concept li").eq(2).addClass("showup delay-3")),showupArr.push($(".home .bulletin li").eq(0).addClass("showup delay-1")),showupArr.push($(".home .bulletin li").eq(1).addClass("showup delay-2")),showupArr.push($(".home .bulletin li").eq(2).addClass("showup delay-3")),showupArr.push($(".home .news li").eq(0).addClass("showup delay-1")),showupArr.push($(".home .news li").eq(1).addClass("showup delay-2")),showupArr.push($(".home .news li").eq(2).addClass("showup delay-3")),showupArr.push($(".home .news li").eq(3).addClass("showup delay-1")),showupArr.push($(".home .news li").eq(4).addClass("showup delay-2")),showupArr.push($(".home .news li").eq(5).addClass("showup delay-3")),showupArr.push($(".home .news li").eq(6).addClass("showup delay-1")),showupArr.push($(".home .news li").eq(7).addClass("showup delay-2")),showupArr.push($(".home .news li").eq(8).addClass("showup delay-3")),showupArr.push($(".home .life li").eq(0).addClass("showup delay-1")),showupArr.push($(".home .life li").eq(1).addClass("showup delay-2")),showupArr.push($(".home .life li").eq(2).addClass("showup delay-3")),showupArr.push($(".home .life li").eq(3).addClass("showup delay-1")),showupArr.push($(".home .life li").eq(4).addClass("showup delay-2")),showupArr.push($(".home .life li").eq(5).addClass("showup delay-3")),showupArr.push($(".home .life li").eq(6).addClass("showup delay-1")),showupArr.push($(".home .life li").eq(7).addClass("showup delay-2")),showupArr.push($(".home .life li").eq(8).addClass("showup delay-3")),showupArr.push($(".home .blog li").eq(0).addClass("showup delay-1")),showupArr.push($(".home .blog li").eq(1).addClass("showup delay-2")),showupArr.push($(".home .blog li").eq(2).addClass("showup delay-3")),showupArr.push($(".home .blog li").eq(3).addClass("showup delay-4")),showupArr.push($(".home .blog li").eq(4).addClass("showup delay-5")),$(window).width()>=1170&&$.each(showupArr,function(i,d){$(window).scrollTop()+winHeight-100>d.offset().top&&d.addClass("on")})};$(window).on({resize:function(){slideupBnr()},scroll:function(){slideupBnr()}})}if($(".gotop").length){$(".gotop").on("click",function(ev){var tl=new TimelineMax({paused:!0});tl.set(".gotop .fly",{top:ev.clientY,position:"fixed"}),tl.add([function(){$(".gotop").removeClass("showup")}]),tl.add([TweenMax.to("body",1,{scrollTop:0})]),tl.add([TweenMax.to(".gotop .fly",.25,{opacity:0})]),tl.add([function(){$(".gotop .fly").removeAttr("style"),$(".gotop").addClass("showup")}]),tl.play()}),$(".gotop").addClass("showup delay-1");var scrollGotoTop=function(){var winHeight=$(window).height();if($(window).width()>=768){var d=$(".gotop");$(window).scrollTop()+winHeight-100>d.offset().top?d.addClass("on"):d.removeClass("on")}};$(window).on({resize:function(){scrollGotoTop()},scroll:function(){scrollGotoTop()}})}$(window).trigger("resize")});